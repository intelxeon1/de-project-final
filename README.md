# Итоговый проект

### Краткое описание реализации

Для источника данных использовалось S3 хранилище. staging и dwh таблицы имеют единобразное название currencies и transactions

Даг 1_data_import реализован с поддержкой ежедневного обновления.
При этом данные загружаются в стейнджинг целиком и затем подмянются партиции для нужной целевой таблицы.
Таким образом фильтрация выполняется наилучшим образом, т.к. это делает БД через механизм партиций.
Отслеживание файлов по номерам счетчика менее надежно, анализ контента значительно медленее работает.

Вспомогательные функции и константы вынесены в subpackage lib2

SQL statement для расчета витрины расположен в  [lib2.consts](./src/dags/lib2/consts.py)

Расчет витрины в 2_datamart_update реализовано full`ом из-за её незначительно размера

\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\










































### Описание
Репозиторий предназначен для сдачи итогового проекта.

### Как работать с репозиторием
1. В вашем GitHub-аккаунте автоматически создастся репозиторий `de-project-final` после того, как вы привяжете свой GitHub-аккаунт на Платформе.
2. Скопируйте репозиторий на свой компьютер. В качестве пароля укажите ваш `Access Token`, который нужно получить на странице [Personal Access Tokens](https://github.com/settings/tokens)):
	* `git clone https://github.com/Yandex-Practicum/de-project-final`
3. Перейдите в директорию с проектом: 
	* `cd de-project-final`
4. Выполните проект и сохраните получившийся код в локальном репозитории:
	* `git add .`
	* `git commit -m 'my best commit'`
5. Обновите репозиторий в вашем GitHub-аккаунте:
	* `git push origin main`

### Структура репозитория
Файлы в репозитории будут использоваться для проверки и обратной связи по проекту. Поэтому постарайтесь публиковать ваше решение согласно установленной структуре: так будет проще соотнести задания с решениями.

Внутри `src` расположены папки:
- `/src/dags` - вложите в эту папку код DAG, который поставляет данные из источника в хранилище. Назовите DAG `1_data_import.py`. Также разместите здесь DAG, который обновляет витрины данных. Назовите DAG `2_datamart_update.py`.
- `/src/sql` - сюда вложите SQL-запрос формирования таблиц в `STAGING`- и `DWH`-слоях, а также скрипт подготовки данных для итоговой витрины.
- `/src/py` - если источником вы выберете Kafka, то в этой папке разместите код запуска генерации и чтения данных в топик.
- `/src/img` - здесь разместите скриншот реализованного над витриной дашборда.
